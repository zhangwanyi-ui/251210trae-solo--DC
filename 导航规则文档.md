# DC在线业务系统导航规则文档

## 1. 导航结构概述

### 1.1 整体布局
- 采用三栏布局：顶部导航栏 + 左侧导航栏 + 内容区域
- 顶部导航栏：显示系统名称和功能入口导航（报警、事件、任务、在线、个人中心）
- 左侧导航栏：显示左侧导航页（全景俯瞰、在线业务、应用服务、基础资源、服务健康）
- 内容区域：显示页面名称、面包屑导航、内容导航项和页面内容

### 1.2 导航层级关系
- 顶部导航：报警、事件、任务、在线、个人中心（无内容导航项）
- 左侧导航：全景俯瞰、在线业务、应用服务、基础资源、服务健康（含内容导航项）
- 内容导航：观察、感知、关注、行动（二级级联菜单）

## 2. 导航跳转规则

### 2.1 顶部导航页面规则
- 路径以 `/alarm`、`/event`、`/task`、`/online/`、`/personal` 开头
- 不显示内容导航项
- 示例：`/alarm/alarm-status`、`/event/business-operation-events`

### 2.2 左侧导航页面规则
- 路径以 `/overview`、`/online-business`、`/application-service`、`/infrastructure`、`/service-health` 开头
- 显示内容导航项
- 示例：`/overview/operation-overview`、`/online-business/visitors`

### 2.3 内容导航项规则
- 为左侧导航页面添加14个内容导航项路由
- 路径格式：`/左侧导航路径/内容导航项路径`
- 示例：`/overview/operation-overview/realtime-dynamic`

## 3. 面包屑导航规则

### 3.1 不可点击的主要分类
- 全景俯瞰
- 在线业务
- 应用服务
- 基础资源
- 服务健康
- 报警
- 事件
- 任务
- 在线
- 个人中心

### 3.2 可点击的具体页面
- 运营全景 → `/overview/operation-overview`
- 全过程价值链 → `/overview/value-chain`
- 资源池 → `/overview/resource-pool`
- 访客 → `/online-business/visitors`
- 渠道 → `/online-business/channels`
- 行为 → `/online-business/behaviors`
- 内容 → `/online-business/content`
- 流量承载 → `/application-service/traffic-bearing`
- 在线体验 → `/application-service/online-experience`
- 服务传递效率 → `/application-service/service-efficiency`
- 存量 → `/infrastructure/stock`
- 服务可用性 → `/infrastructure/service-availability`
- 使用和转化 → `/infrastructure/usage-conversion`
- 健康状态 → `/service-health/health-report`
- 黑名单状态 → `/service-health/blacklist`
- 常见问题 → `/service-health/common-issues`
- 健康干预绩效 → `/service-health/intervention-performance`

## 4. 左侧菜单展开规则

### 4.1 互斥原则
- 只有一个导航项可以展开
- 点击在线业务页面，左侧菜单保持展开状态，不自动收起

### 4.2 路径匹配原则
- 根据当前路径自动更新选中状态和展开状态
- 顶部导航页面，清空选中状态和展开状态

## 5. 代码保护措施

### 5.1 导航配置集中管理
- 所有导航规则都集中在 `src/config/navigationConfig.js` 文件中
- 避免分散在多个组件中，便于维护和修改

### 5.2 导航工具函数
- 导航相关逻辑封装在 `src/hooks/useNavigation.js` 中
- 组件通过调用这些函数来实现导航功能

### 5.3 组件注释
- 关键组件（ContentNav.jsx、SideNav.jsx、TopNav.jsx）中添加了详细的注释
- 明确指出导航规则的重要性和修改注意事项

## 6. 导航系统维护注意事项

### 6.1 禁止直接修改
- 禁止直接修改导航组件的核心逻辑
- 如需修改，应先更新 `navigationConfig.js` 配置文件

### 6.2 新增路由规则
- 新增路由时，应遵循现有路由格式
- 添加到对应的配置中，避免破坏现有结构

### 6.3 测试验证
- 修改导航相关代码后，必须测试以下场景：
  - 顶部导航页面是否显示正确
  - 左侧导航页面是否显示内容导航项
  - 面包屑导航是否正确显示，可点击项是否正常跳转
  - 左侧菜单是否保持展开状态，不自动收起
  - 内容导航项切换是否正常，面包屑导航是否跟随更新

## 7. 导航系统相关文件

### 7.1 配置文件
- `src/config/navigationConfig.js`：导航规则配置

### 7.2 工具函数
- `src/hooks/useNavigation.js`：导航工具函数

### 7.3 组件文件
- `src/components/ContentNav.jsx`：内容导航组件
- `src/components/SideNav.jsx`：左侧导航组件
- `src/components/TopNav.jsx`：顶部导航组件

## 8. 常见问题及解决方案

### 8.1 左侧导航页面不显示内容导航项
- 检查 `isTopNavPage` 函数的判断逻辑
- 确保路径匹配规则正确

### 8.2 面包屑导航显示错误
- 检查 `generateBreadcrumbItems` 函数的逻辑
- 确保 `NAVIGATION_RULES.BREADCRUMB` 配置正确

### 8.3 左侧菜单自动收起
- 检查 `SideNav.jsx` 中的 `useEffect` 逻辑
- 确保 `isTopNavPage` 函数的判断逻辑正确

### 8.4 内容导航项切换无效
- 检查 `handleContentNavChange` 函数的逻辑
- 确保 `CONTENT_NAV_PATH_MAP` 配置正确

## 9. 版本历史

### 2025-12-11
- 初始版本
- 定义了导航结构和规则
- 实现了导航配置集中管理
- 添加了导航工具函数和组件注释

## 10. 责任说明

- 导航系统由前端开发团队负责维护
- 任何修改都必须经过代码审查
- 确保导航系统的稳定性和一致性

---

**注意：此文档是DC在线业务系统导航系统的核心文档，任何修改都必须遵循此文档的规则。如有违反，将导致系统功能异常。**
